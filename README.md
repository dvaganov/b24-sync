# b24-sync

Приложение для Битрикс24, позволяющая получать refresh_token для использования его в десктопных приложениях, например в 1С:Предприятие.

## API

#### Общий параметр (`sid`)
Устанавливает переданный идентификатор сессии, что позволяет подключаться к сессии с разных клиентов.

#### Существующие действия (`action`)
* `index` - отображает главную страницу с формой или текстом, в случае успешно полученных данных.
* `setup` - принимает POST параметры приложения в Битриксе24 (`domain`, `client_id`, `client_secret`) и перенаправляет туда пользователя для авторизации.
* `token` - принимает ответ от приложения в Битриксе24 и отправляет запрос для получения `access_token` и `refresh_token`. В итоге переадресует пользователя в `index`.
* `get` - выводит всю полученную информацию (`uuid`, `domain`, `client_id`, `client_secret`, `refresh_token`) в формате JSON. Под `uuid` понимается уникальный идентификатор, под которым хранится эта информация в БД.
* `clear` - использует `uuid` для удаления строки в БД и очистки текущей сессии. В результате переадресует пользователся в `index`.

